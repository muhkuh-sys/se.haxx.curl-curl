diff -uNr curl-7.51.0_org/CMakeLists.txt curl-7.51.0_patched/CMakeLists.txt
--- curl-7.51.0_org/CMakeLists.txt	2017-01-29 16:22:44.030875679 +0100
+++ curl-7.51.0_patched/CMakeLists.txt	2017-01-29 16:28:48.106965220 +0100
@@ -481,7 +481,10 @@
 set(HAVE_LIBSSH2_H OFF)
 
 if(CMAKE_USE_LIBSSH2)
-  find_package(LibSSH2)
+  find_package(LibSSH2 REQUIRED CONFIG)
+  SET(LIBSSH2_FOUND TRUE)
+  GET_TARGET_PROPERTY(LIBSSH2_LIBRARY Libssh2::libssh2 LOCATION)
+  GET_TARGET_PROPERTY(LIBSSH2_INCLUDE_DIR Libssh2::libssh2 INTERFACE_INCLUDE_DIRECTORIES)
   if(LIBSSH2_FOUND)
     list(APPEND CURL_LIBS ${LIBSSH2_LIBRARY})
     set(CMAKE_REQUIRED_LIBRARIES ${LIBSSH2_LIBRARY})
